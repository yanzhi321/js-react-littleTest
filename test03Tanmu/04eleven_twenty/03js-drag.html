<!DOCTYPE html>
<html lang="en">
<head>
	<title>js</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="utf-8">
	<meta name="keywords" content="node.js, web chat application,  前端开发">
	<meta name="description" content="online web chat application">
	<meta name="author" content="yanzhi321">
	<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit = no">
	<link rel="shortcut icon" href="images/google.gif">
	<style>
		
        *{
			margin: 0;
			padding: 0;
		}
		ul{
			list-style: none;
		}
		a{
			text-decoration: none;
		}
		html{
			font-size: 50px;
			height: 100%;
			overflow-x: hidden;
		}
		body{
			font-size: .28em;
			height: 100%;
			min-width: 320px
		}

		.box{
			width: 1rem;
			height: 1rem;
			background: purple;
			position: absolute;
		}

	</style>
</head>
<body>
	<div class="box">
		
	</div>
	<script>
		
        window.onload = function(){

        	let boxNode = document.getElementsByClassName('box')[0]
        	boxNode.style.background = 'red'

        	const dragMove = (ele) =>{

        		ele.onmousedown = function(evt){

        			let e  = evt || window.event;
        			let disX = e.clientX - ele.offsetLeft
        			let disY = e.clientY - ele.offsetTop
        			console.log(ele)
        			document.onmousemove = function(evt){
        				console.log(ele)
        				let e = evt || window.event
        				let left = e.clientX - disX
        				let top = e.clientY - disY 

        				let leftMax = document.documentElement.clientWidth - ele.clientWidth
        				let topMax = document.documentElement.clientHeight - ele.clientHeight

        				if(left >= leftMax){
        					left = leftMax
        				}else if(left <= 0){
        					left = 0
        				}

        				if(top >= topMax){
        					top = topMax
        				}else if(top <= 0){
        					top = topMax
        				}

        				ele.style.left = left + 'px'
        				ele.style.top = top + 'px'
        			}

        			document.onmouseup = function(){
        				document.onmousemove  = null
        				document.onmouseup = null
        			}
        		}
        	}

        	dragMove(boxNode)

        }

	</script>
</body>
</html>